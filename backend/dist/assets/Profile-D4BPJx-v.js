import{ah as S,B as d,ak as e,aR as j,aq as k,aO as A,aK as $,aS as y,aE as h,aF as b,aj as g}from"./index-CPERY6Kl.js";import{S as D}from"./save-OVuX2I-E.js";const M=()=>{const{user:l,updateUser:N}=S(),[c,f]=d.useState("profile"),[n,i]=d.useState(!1),[m,t]=d.useState({type:"",text:""}),[u,w]=d.useState({name:l?.name||"",email:l?.email||""}),[r,x]=d.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[o,v]=d.useState({current:!1,new:!1,confirm:!1}),P=async a=>{a.preventDefault(),i(!0),t({type:"",text:""});try{const s=await g.put(`/api/users/${l.id}`,u);N(s.data.user),t({type:"success",text:"Profile updated successfully!"})}catch(s){t({type:"error",text:s.response?.data?.message||"Failed to update profile"})}finally{i(!1)}},C=async a=>{if(a.preventDefault(),i(!0),t({type:"",text:""}),r.newPassword!==r.confirmPassword){t({type:"error",text:"New passwords do not match"}),i(!1);return}if(r.newPassword.length<8){t({type:"error",text:"Password must be at least 8 characters long"}),i(!1);return}if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]).+$/.test(r.newPassword)){t({type:"error",text:"Password must contain uppercase, lowercase, number, and special symbol"}),i(!1);return}try{await g.put(`/api/users/${l.id}/password`,{currentPassword:r.currentPassword,newPassword:r.newPassword}),x({currentPassword:"",newPassword:"",confirmPassword:""}),t({type:"success",text:"Password changed successfully!"})}catch(s){t({type:"error",text:s.response?.data?.message||"Failed to change password"})}finally{i(!1)}},p=a=>{v(s=>({...s,[a]:!s[a]}))};return e.jsxs("div",{className:"max-w-4xl pb-4 mx-auto px-4 sm:px-6 lg:px-8 animate-fade-in",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Profile Settings"}),e.jsx("p",{className:"text-gray-600",children:"Manage your account settings and preferences"}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Email Notifications Setup"}),e.jsxs("div",{className:"mt-1 text-sm text-blue-700",children:[e.jsx("p",{children:"To receive email notifications for tasks, deadlines, and project updates:"}),e.jsxs("ul",{className:"mt-2 list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Make sure your email address is correct in the profile below"}),e.jsxs("li",{children:["Visit ",e.jsx(j,{to:"/settings",className:"font-semibold underline",children:"Settings"})," to configure your notification preferences"]}),e.jsxs("li",{children:["Check ",e.jsx(j,{to:"/notifications",className:"font-semibold underline",children:"Notifications"})," to see your recent alerts"]})]})]})]})]})})]}),m.text&&e.jsxs("div",{className:`mb-6 p-4 rounded-lg flex items-center ${m.type==="success"?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"}`,children:[m.type==="success"?e.jsx(k,{className:"h-5 w-5 mr-2"}):e.jsx(A,{className:"h-5 w-5 mr-2"}),m.text]}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsxs("nav",{className:"-mb-px flex",children:[e.jsxs("button",{onClick:()=>f("profile"),className:`py-4 px-6 text-sm font-medium border-b-2 ${c==="profile"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx($,{className:"inline-block w-4 h-4 mr-2"}),"Profile Information"]}),e.jsxs("button",{onClick:()=>f("password"),className:`py-4 px-6 text-sm font-medium border-b-2 ${c==="password"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx(y,{className:"inline-block w-4 h-4 mr-2"}),"Change Password"]})]})}),e.jsxs("div",{className:"p-6",children:[c==="profile"&&e.jsxs("form",{onSubmit:P,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Full Name"}),e.jsx("input",{type:"text",className:"form-input",value:u.name,onChange:a=>w(s=>({...s,name:a.target.value})),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Email Address"}),e.jsx("input",{type:"email",className:"form-input",value:u.email,onChange:a=>w(s=>({...s,email:a.target.value})),required:!0,placeholder:"your.email@company.com"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"This email will be used for notifications about tasks, projects, and reminders"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Role"}),e.jsx("input",{type:"text",className:"form-input bg-gray-50",value:l?.role||"",disabled:!0}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Role cannot be changed"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Member Since"}),e.jsx("input",{type:"text",className:"form-input bg-gray-50",value:l?.createdAt?new Date(l.createdAt).toLocaleDateString():"N/A",disabled:!0})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:n,className:"btn btn-primary disabled:opacity-50",children:[n?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx(D,{size:16}),n?"Saving...":"Save Changes"]})})]}),c==="password"&&e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o.current?"text":"password",className:"form-input pr-10",value:r.currentPassword,onChange:a=>x(s=>({...s,currentPassword:a.target.value})),required:!0}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>p("current"),children:o.current?e.jsx(h,{className:"h-4 w-4 text-gray-400"}):e.jsx(b,{className:"h-4 w-4 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o.new?"text":"password",className:"form-input pr-10",value:r.newPassword,onChange:a=>x(s=>({...s,newPassword:a.target.value})),required:!0,minLength:6}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>p("new"),children:o.new?e.jsx(h,{className:"h-4 w-4 text-gray-400"}):e.jsx(b,{className:"h-4 w-4 text-gray-400"})})]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:r.newPassword&&!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]).+$/.test(r.newPassword)?"Password should include uppercase, lowercase, number, and special symbol.":"Must be at least 8 characters long"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"form-label",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o.confirm?"text":"password",className:"form-input pr-10",value:r.confirmPassword,onChange:a=>x(s=>({...s,confirmPassword:a.target.value})),required:!0}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>p("confirm"),children:o.confirm?e.jsx(h,{className:"h-4 w-4 text-gray-400"}):e.jsx(b,{className:"h-4 w-4 text-gray-400"})})]})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{type:"submit",disabled:n,className:"btn btn-primary disabled:opacity-50",children:[n?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}):e.jsx(y,{size:16}),n?"Changing...":"Change Password"]})})]})]})]})]})};export{M as default};
//# sourceMappingURL=Profile-D4BPJx-v.js.map
